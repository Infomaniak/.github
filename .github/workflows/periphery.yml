name: Periphery

on: workflow_call

jobs:
  periphery:
    runs-on: [ self-hosted, iOS ]

    steps:
      - name: Checkout
        uses: actions/checkout@v6
      - uses: jdx/mise-action@6d1e696aa24c1aa1bcc1adea0212707c71ab78a8
      - name: Generate
        run: tuist install && tuist generate
      - name: Periphery
        run: periphery scan --retain-codable-properties --format github-actions --relative-results --strict
